# Azure Firewall in depth

[Azure Firewall in depth 🔗](https://www.coursera.org/learn/cybersecurity-solutions-and-microsoft-defender/supplement/CZTid/azure-firewall-in-depth)

# Azure Firewall In Depth (Azure Firewall အသေးစိတ်)

## Introduction (နိဒါန်း)

ယခင်က သင်သည် Microsoft Azure မှ ပေးအပ်နိုင်သော မတူညီသော ဖိုင်းဝေါလ် SKU များအကြောင်း မိတ်ဆက်ခံရပြီးဖြစ်သည်။ ၎င်းတို့တွင် Basic နှင့် Standard Azure Firewalls များသည် ဗဟိုကွန်ရက် (Virtual Network) ကာကွယ်မှုကို ပေးစွမ်းပြီး၊ Web Application Firewall သည် ဝက်ဘ်ဆိုင်ရာ တိုက်ခိုက်မှုများမှ ဝက်ဘ် အပ္ပလီကေးရှင်းများကို ကာကွယ်ပေးသည့် ပိုမိုတိကျသော ဝန်ဆောင်မှုတစ်ခုဖြစ်သည်။

ဤစာဖတ်ခြင်းတွင်၊ Basic နှင့် Standard Azure Firewall ကို ပိုမိုနက်ရှိုင်းစွာ စူးစမ်းလေ့လာမည်ဖြစ်ပြီး၊ အထူးသဖြင့် ၎င်း၏ ကလောက်အခြေခံ ကွန်ရက် လုံခြုံရေးပေးရာတွင် ပါဝင်သော အခန်းကဏ္ဍကို အာရုံစိုက်မည်ဖြစ်သည်။

## Azure Firewall (Azure Firewall)

Azure Firewall သည် ၎င်း၏အလုပ်ကို ထိရောက်စွာ လုပ်ဆောင်နိုင်ရန်၊ ၎င်းကို သင်ကာကွယ်လိုသော ယုံကြည်ရသည့် ကွန်ရက်နှင့် အလားအလာရှိသော ခြိမ်းခြောက်မှုများကို ဖြစ်ပေါ်စေနိုင်သော ယုံကြည်မရသည့် ကွန်ရက်ကြားတွင် အတားအဆီးတစ်ခုအဖြစ် သတ်မှတ်ရမည်ဖြစ်သည်။ အများအားဖြင့် Azure Firewall ကို Azure ဗဟိုကွန်ရက်နှင့် အင်တာနက်ကြားတွင် အတားအဆီးအဖြစ် ဖြန့်ကျက်လေ့ရှိသည်။

Azure Firewall ကို **ဟပ်-စပုတ် (hub-and-spoke)** ကွန်ရက် ဖွဲ့စည်းပုံဖြင့် ဖြန့်ကျက်ခြင်းသည် အကောင်းဆုံးဖြစ်ပြီး၊ အောက်ပါ ဝိသေသလက္ခဏာများ ပါဝင်သည်-

- **ဟပ် ဗဟိုကွန်ရက် (Hub Virtual Network):** ဗဟိုချိတ်ဆက်မှု အမှတ်အဖြစ် လုပ်ဆောင်သော ဗဟိုကွန်ရက်တစ်ခု။
- **စပုတ် ဗဟိုကွန်ရက်များ (Spoke Virtual Networks):** ဟပ်နှင့် ပီးယာရင်း (peered) ချိတ်ဆက်ထားသော ဗဟိုကွန်ရက် တစ်ခု သို့မဟုတ် တစ်ခုထက်ပိုသော ကွန်ရက်များ။ ၎င်းတို့သည် ဝန်ဆောင်မှု ဆာဗာများကို ထည့်သွင်းရန် အသုံးပြုသည်။

အောက်တွင် သရုပ်ဖော်ထားသည့်ပုံအတိုင်း၊ ဖိုင်းဝေါလ် အင်စတန့်စ်ကို ဟပ် ဗဟိုကွန်ရက်၏ ကွန်ရက်ခွဲ (subnet) တစ်ခုတွင် ဖြန့်ကျက်ပြီး၊ အဝင်နှင့် အထွက် အသွားအလာအားလုံးကို ဖိုင်းဝေါလ်မှ ဖြတ်သန်းသွားစေရန် ပြင်ဆင်သတ်မှတ်သည်။

_ဖိုင်းဝေါလ်ကို ဟပ်တွင် ဖြန့်ကျက်ထားပြီး၊ အဝင်အထွက် အသွားအလာအားလုံးကို ထိန်းချုပ်ကာ စပုတ်များကို ကာကွယ်ပေးသည်။_

<img src="https://d3c33hcgiwev3.cloudfront.net/imageAssetProxy.v1/vFIfE1DKSz62ElFcNC33mg_ad552ebea4b041d78ba14603b76e6ae1_image.png?expiry=1743638400000&hmac=sqa41oMonoeFXvEg8bcn8IqSkyNLYEnTCDJfnyOudY8">

### Network Address Translation (NAT - ကွန်ရက် လိပ်စာ ပြောင်းလဲခြင်း)

ခြိမ်းခြောက်မှု ထောက်လှမ်းရေး (Threat Intelligence)၊ အပ္ပလီကေးရှင်း၊ နှင့် ကွန်ရက် ဖိုင်းဝေါလ် စည်းမျဉ်းများအပြင်၊ Azure Firewall သည် အများသူငှာ IP လိပ်စာများကို သီးသန့် IP လိပ်စာများသို့ (သို့မဟုတ် ပြောင်းပြန်) ပြောင်းလဲရန် **ကွန်ရက် လိပ်စာ ပြောင်းလဲခြင်း (Network Address Translation - NAT)** ကိုလည်း အသုံးပြုသည်။

NAT ၏ အမျိုးအစားသည် အသွားအလာ၏ ဦးတည်ရာပေါ် မူတည်သည်-

- **အဝင် အသွားအလာ (Inbound Traffic):** ခွင့်ပြုထားသော အဝင် အသွားအလာအတွက်၊ Azure Firewall သည် **Destination NAT (DNAT)** ကို အသုံးပြု၍ ဖိုင်းဝေါလ်၏ အများသူငှာ IP လိပ်စာကို ဗဟိုကွန်ရက်အတွင်းရှိ သင့်လျော်သော ဦးတည်ရာ အရင်းအမြစ်၏ သီးသန့် IP လိပ်စာသို့ ပြောင်းလဲပေးသည်။
- **အထွက် အသွားအလာ (Outbound Traffic):** ခွင့်ပြုထားသော အထွက် အသွားအလာအတွက်၊ Azure Firewall သည် **Source NAT (SNAT)** ကို အသုံးပြု၍ အရင်းအမြစ် IP လိပ်စာကို ဖိုင်းဝေါလ်၏ အများသူငှာ IP လိပ်စာသို့ ပြောင်းလဲပေးသည်။

NAT သည် အပ္ပလီကေးရှင်းနှင့် ကွန်ရက် စည်းမျဉ်းများကဲ့သို့ပင် ဖိုင်းဝေါလ် စည်းမျဉ်း အမျိုးအစားတစ်ခု ဖြစ်ပြီး၊ အများသူငှာ IP လိပ်စာများအပေါ် အခြေခံ၍ အသွားအလာကို ပြောင်းလဲပြီး စစ်ထုတ်ရန် အသုံးပြုသည်။ NAT အကြောင်း ပိုမိုသိရှိရန် ထပ်ဆောင်း အရင်းအမြစ်များတွင် ကြည့်ရှုနိုင်သည်။

_အောက်တွင် သရုပ်ဖော်ထားသော ပုံသည် ဗဟိုကွန်ပျူတာသို့ အဝေးမှ ဒက်စတော့ ချိတ်ဆက်မှုကို ဖွင့်ပေးပုံကို ပြသထားသည်။ NAT စည်းမျဉ်းသည် ဖိုင်းဝေါလ်၏ အများသူငှာ IP လိပ်စာနှင့် ပို့တ် 3389 ကို စပုတ်ရှိ ဗဟိုကွန်ပျူတာ၏ သီးသန့် IP လိပ်စာသို့ ပြောင်းလဲပေးသည်။_

<img src="https://d3c33hcgiwev3.cloudfront.net/imageAssetProxy.v1/VYWjaaTtTgO6QxpUuyBaEw_e63af8444aa741939b1aae9001ca39e1_image.png?expiry=1743638400000&hmac=El9KxuEIaqD3lUUEbbJDEcEgt1bYvyOrFTh1mO-Vi5s">

### Firewall Rules and Features (ဖိုင်းဝေါလ် စည်းမျဉ်းများနှင့် အင်္ဂါရပ်များ)

အောက်ပါ ဇယားတွင် Azure Firewall ကို ဖြန့်ကျက်သောအခါ အသုံးပြုနိုင်သော ထပ်ဆောင်း အင်္ဂါရပ်အချို့ကို ဖော်ပြထားသည်။

| **စည်းမျဉ်း/အင်္ဂါရပ်** | **ဖော်ပြချက်**                                                                                                                                                                                                                                                                                                                                           |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **FQDN**                | အပြည့်အဝ အရည်အချင်းပြည့်မီသော ဒိုမိန်းအမည် (Fully Qualified Domain Name) သည် ဟို့စ် သို့မဟုတ် IP လိပ်စာတစ်ခု သို့မဟုတ် တစ်ခုထက်ပိုသော ဒိုမိန်းအမည်ဖြစ်သည်။ အပ္ပလီကေးရှင်း စည်းမျဉ်းတွင် FQDN ထည့်သွင်းခြင်းဖြင့် ထိုဒိုမိန်းသို့ ဝင်ရောက်ခွင့် ပေးသည်။ FQDN ကို အသုံးပြုသောအခါ၊ \*.google.com ကဲ့သို့ ဝိုင်းကတ် (wildcards) များ အသုံးပြုနိုင်သည်။       |
| **FQDN Tag**            | Microsoft ၏ လူသိများသော FQDN အုပ်စုတစ်ခု။ အပ္ပလီကေးရှင်း စည်းမျဉ်းတွင် FQDN တဂ်ထည့်ခြင်းဖြင့် ထိုတဂ်၏ FQDN များသို့ အထွက် ဝင်ရောက်ခွင့် ပေးသည်။ Windows Update၊ Azure Virtual Desktop၊ Windows Diagnostics၊ Azure Backup စသည်တို့အတွက် FQDN တဂ်များ ရှိသည်။ Microsoft မှ စီမံခန့်ခွဲပြီး ဖန်တီး သို့မဟုတ် ပြင်ဆင်၍ မရပါ။                                 |
| **Service Tag**         | သတ်မှတ်ထားသော Azure ဝန်ဆောင်မှုနှင့် ဆက်စပ်သော IP လိပ်စာ ရှေ့ဆက်များ (prefixes) အုပ်စု။ ကွန်ရက် စည်းမျဉ်းတွင် ဝန်ဆောင်မှု တဂ် ထည့်ခြင်းဖြင့် ထိုတဂ်ကိုယ်စားပြုသော ဝန်ဆောင်မှုသို့ ဝင်ရောက်ခွင့် ပေးသည်။ Azure Backup၊ Azure Cosmos DB၊ Logic Apps စသည်တို့အတွက် ဝန်ဆောင်မှု တဂ်များ ရှိသည်။ Microsoft မှ စီမံခန့်ခွဲပြီး ဖန်တီး သို့မဟုတ် ပြင်ဆင်၍ မရပါ။ |
| **IP Groups**           | IP လိပ်စာများ အုပ်စု (ဥပမာ 10.2.0.0/16 သို့မဟုတ် 10.1.0.0-10.1.0.31)။ NAT သို့မဟုတ် အပ္ပလီကေးရှင်း စည်းမျဉ်းတွင် အရင်းအမြစ် လိပ်စာအဖြစ်၊ သို့မဟုတ် ကွန်ရက် စည်းမျဉ်းတွင် အရင်းအမြစ် သို့မဟုတ် ဦးတည်ရာ လိပ်စာအဖြစ် IP အုပ်စုကို အသုံးပြုနိုင်သည်။                                                                                                         |
| **Custom DNS**          | ဒိုမိန်းအမည်များကို IP လိပ်စာများအဖြစ် ပြောင်းလဲပေးသော စိတ်ကြိုက် DNS ဆာဗာ။ Azure DNS အစား စိတ်ကြိုက် DNS ဆာဗာ အသုံးပြုပါက၊ Azure Firewall ကို DNS ပရောက်စီအဖြစ် ပြင်ဆင်သတ်မှတ်ရမည်။                                                                                                                                                                     |
| **DNS Proxy**           | Azure Firewall ကို DNS ပရောက်စီအဖြစ် ပြင်ဆင်သတ်မှတ်နိုင်ပြီး၊ ဆိုလိုသည်မှာ ကလိုင်းယင့် DNS တောင်းဆိုမှုအားလုံးသည် DNS ဆာဗာသို့ မသွားမီ ဖိုင်းဝေါလ်မှ ဖြတ်သန်းသွားရသည်။                                                                                                                                                                                   |

### Threats (ခြိမ်းခြောက်မှုများ)

Azure Firewall အတွင်းရှိ ဤစည်းမျဉ်းများနှင့် အင်္ဂါရပ်များသည် အောက်ပါ ခြိမ်းခြောက်မှုများမှ ကာကွယ်ပေးသည်-

1. **ကွန်ရက် ထိုးဖောက်မှုမှ ကာကွယ်ခြင်း (Protecting Against Infiltration):**  
   Azure Firewall သည် ထိုသို့သော ထိုးဖောက်မှုများကို တားဆီးရန် ဒီဇိုင်းထုတ်ထားသည်။ ဥပမာအနေဖြင့်၊ အန္တရာယ်ရှိသော ဟက်ကာတစ်ဦးသည် ကွန်ရက် အရင်းအမြစ်တစ်ခုသို့ ဝင်ရောက်ခွင့် တောင်းဆိုခြင်းဖြင့် ကွန်ရက်ထဲသို့ ထိုးဖောက်ရန် ကြိုးစားနိုင်သည်။ Azure Firewall သည် ကွန်ရက် ပက်ကက် (packets) များ၏ **အခြေအနေ စောင့်ကြည့်ခြင်း (stateful inspection)** ကို အသုံးပြု၍ ထိုသို့သော တောင်းဆိုမှုများ၏ အကြောင်းအရာကို စစ်ဆေးသည်။ အကယ်၍ တောင်းဆိုမှုသည် ယခင် တရားဝင် လုပ်ဆောင်ချက်တစ်ခု၏ တုံ့ပြန်မှုဖြစ်ပါက၊ ဖိုင်းဝေါလ်သည် ထိုတောင်းဆိုမှုကို ခွင့်ပြုဖွယ်ရှိသည်။ သို့သော် တောင်းဆိုမှုသည် မမျှော်လင့်ဘဲ ရောက်ရှိလာပြီး ယခင် ကွန်ရက် လုပ်ဆောင်ချက်နှင့် မသက်ဆိုင်ပါက၊ ၎င်းသည် ထိုးဖောက်မှု ကြိုးစားမှုဖြစ်နိုင်ချေများသည်။ ဤအခါတွင် ဖိုင်းဝေါလ်သည် တောင်းဆိုမှုကို ငြင်းပယ်မည်ဖြစ်သည်။

2. **အသုံးပြုသူ အမှားများမှ ကွန်ရက်ကို ကာကွယ်ခြင်း (Protecting Against User Error):**  
   Azure Firewall သည် ခြိမ်းခြောက်မှု ထောက်လှမ်းရေး (threat intelligence) ကို အသုံးပြု၍ လူသိများသော အန္တရာယ်ရှိသည့် ဒိုမိန်းများနှင့် IP လိပ်စာများသို့ ဝင်ရောက်ခွင့်ကို ငြင်းပယ်ခြင်းဖြင့် တိုက်ခိုက်မှုများကို ကာကွယ်သည်။

### Azure Firewall Manager and Firewall Policies (Azure Firewall Manager နှင့် ဖိုင်းဝေါလ် မူဝါဒများ)

**Azure Firewall Manager** သည် Azure Firewall အင်စတန့်စ် အများအပြားကို ဗဟိုမှ ပြင်ဆင်သတ်မှတ်ခြင်းနှင့် စီမံခန့်ခွဲခြင်း အမှတ်တစ်ခု ပေးသည်။ အောက်တွင် သရုပ်ဖော်ထားသော ပုံသည် Azure Firewall Manager သည် ဖိုင်းဝေါလ် မူဝါဒတစ်ခု သို့မဟုတ် တစ်ခုထက်ပိုသော မူဝါဒများကို ဖန်တီးပြီး ၎င်းတို့ကို ဖိုင်းဝေါလ် အများအပြားသို့ လျင်မြန်စွာ အသုံးချနိုင်ပုံကို ပြသထားသည်။

_ဟပ်-စပုတ် ဖွဲ့စည်းပုံ အများအပြားတွင် ဖြန့်ကျက်ထားသော ဖိုင်းဝေါလ်များစွာပါဝင်သည့် VNet တစ်ခု၊ ဖိုင်းဝေါလ် မူဝါဒများဖြင့် ဗဟိုမှ ထိန်းချုပ်ထားသည်။_

<img src="https://d3c33hcgiwev3.cloudfront.net/imageAssetProxy.v1/juF0sePsTwe856FMSuX0YA_8efcfebb1aff408d99b32cf94ff6b2e1_MSCSA_C5M1L3_Item-05_img3new.png?expiry=1743638400000&hmac=siIdn-G04FTLt27sIjmhYjQcx34RFVkLZU4sfJKNKiY">

ဖိုင်းဝေါလ် တစ်ခုတည်း၏ ပြင်ဆင်သတ်မှတ်မှုသည် ရှုပ်ထွေးနိုင်သည်။ ဥပမာအနေဖြင့်၊ ဖိုင်းဝေါလ်တွင် စည်းမျဉ်း စုစည်းမှု (rule collections) အများအပြား ပြင်ဆင်သတ်မှတ်ထားနိုင်သည်။ **စုစည်းမှု (collection)** ဆိုသည်မှာ အောက်ပါ အရာများထဲမှ တစ်ခု သို့မဟုတ် အားလုံး၏ ပေါင်းစပ်မှုဖြစ်သည်-

- ကွန်ရက် လိပ်စာ ပြောင်းလဲခြင်း (NAT) စည်းမျဉ်းတစ်ခု သို့မဟုတ် တစ်ခုထက်ပို။
- ကွန်ရက် စည်းမျဉ်းတစ်ခု သို့မဟုတ် တစ်ခုထက်ပို။
- အပ္ပလီကေးရှင်း စည်းမျဉ်းတစ်ခု သို့မဟုတ် တစ်ခုထက်ပို။

စိတ်ကြိုက် DNS နှင့် ခြိမ်းခြောက်မှု ထောက်လှမ်းရေး စည်းမျဉ်းများကဲ့သို့သော အခြား ဖိုင်းဝေါလ် ဆက်တင်များကို ထည့်သွင်းသောအခါ၊ ဖိုင်းဝေါလ် တစ်ခုတည်းကို ပြင်ဆင်သတ်မှတ်ခြင်းသည် ဝန်ထုပ်ဝန်ပိုး ဖြစ်လာနိုင်သည်။ ထိုဝန်ထုပ်ဝန်ပိုးကို တိုးစေသော အဓိက ကွန်ရက် လုံခြုံရေး အခြေအနေ နှစ်ခုမှာ-

1. သင့်ကွန်ရက် ဗိသုကာများတွင် ဖိုင်းဝေါလ် အများအပြား လိုအပ်သည်။
2. ဖိုင်းဝေါလ် တစ်ခုစီသည် လူတိုင်းအတွက် သက်ဆိုင်သော အခြေခံ လုံခြုံရေး စည်းမျဉ်းများအပြင်၊ ဖန်တီးသူများ၊ ဒေတာဘေ့စ် အသုံးပြုသူများ၊ နှင့် စျေးကွက်ရှာဖွေရေး ဌာနစသည့် သတ်မှတ်ထားသော အုပ်စုများအတွက် အထူး စည်းမျဉ်းများကို အကောင်အထည်ဖော်ရန် လိုအပ်သည်။

ဤဖိုင်းဝေါလ် အခြေအနေများနှင့် အလားတူ အခြေအနေများ၏ ရှုပ်ထွေးမှုကို ရိုးရှင်းစေရန်၊ **ဖိုင်းဝေါလ် မူဝါဒများ (firewall policies)** ကို အကောင်အထည်ဖော်နိုင်သည်။ **ဖိုင်းဝေါလ် မူဝါဒ** ဆိုသည်မှာ NAT၊ ကွန်ရက်၊ နှင့် အပ္ပလီကေးရှင်း စည်းမျဉ်းများ၏ စုစည်းမှု တစ်ခု သို့မဟုတ် တစ်ခုထက်ပို၊ စိတ်ကြိုက် DNS ဆက်တင်များ၊ ခြိမ်းခြောက်မှု ထောက်လှမ်းရေး ဆက်တင်များ စသည်တို့ ပါဝင်သော Azure အရင်းအမြစ်တစ်ခု ဖြစ်သည်။

ဤနေရာတွင် အဓိကအချက်မှာ Azure သည် **Firewall Policy** ဟု ခေါ်သော အရင်းအမြစ်တစ်ခုကို ပေးထားခြင်းဖြစ်သည်။ သင်ဖန်တီးသော ဖိုင်းဝေါလ် မူဝါဒတစ်ခုသည် ထိုအရင်းအမြစ်၏ အင်စတန့်စ်တစ်ခု ဖြစ်သည်။ သီးခြား အရင်းအမြစ်တစ်ခုအနေဖြင့်၊ Azure Firewall Manager ကို အသုံးပြု၍ မူဝါဒကို ဖိုင်းဝေါလ် အများအပြားသို့ လျင်မြန်စွာ အသုံးချနိုင်သည်။ အခြေခံ မူဝါဒတစ်ခု ဖန်တီးနိုင်ပြီး၊ ပိုမို အထူးပြု မူဝါဒများကို အခြေခံ မူဝါဒ၏ စည်းမျဉ်းများကို အမွေဆက်ခံစေနိုင်သည်။

Sam’s Scoops အတွက်၊ Firewall Manager သည် လုပ်ငန်းသည် ဖိုင်းဝေါလ် အများအပြားသို့ ချဲ့ထွင်ရန် လိုအပ်သောအခါ အလုပ်ဝန်ကို အမှန်တကယ် လျှော့ချပေးမည်ဖြစ်သည်။ အကြောင်းမှာ ဖိုင်းဝေါလ် မူဝါဒများကို သတ်မှတ်ပြီးသည်နှင့်၊ ၎င်းတို့ကို အနာဂတ် ဖိုင်းဝေါလ် စက်ပစ္စည်းများသို့ အသုံးချနိုင်ပြီး၊ ဝန်ဆောင်မှုအသစ်များကို အွန်လိုင်းသို့ ယူဆောင်လာရန် အချိန်ကို လျှော့ချပေးသည်။

## Conclusion (နိဂုံး)

Azure Firewall သည် Azure ကလောက် လုံခြုံရေး၏ အရေးပါသော အစိတ်အပိုင်းတစ်ခု ဖြစ်ပြီး၊ VNets နှင့် ၎င်းတို့ပေါ်တွင် လည်ပတ်နေသော ဝန်ဆောင်မှုများကို ကာကွယ်ပေးသည်။ အသွားအလာ စစ်ထုတ်မှုကို အပ္ပလီကေးရှင်း၊ ကွန်ရက်၊ နှင့် NAT စည်းမျဉ်းများဖြင့် ဆုံးဖြတ်သည်။ ထို့ပြင်၊ NAT စည်းမျဉ်းများသည် အဓိက အရင်းအမြစ်များသို့ ဝင်ရောက်ခွင့်ကိုလည်း ပေးနိုင်သည်။

ဖိုင်းဝေါလ် မူဝါဒတစ်ခု သတ်မှတ်ခြင်းဖြင့်၊ ဖိုင်းဝေါလ်များ၏ စီမံခန့်ခွဲမှုကို ရိုးရှင်းစေနိုင်သည်။ ၎င်းသည် ဖိုင်းဝေါလ် အင်တာဖေ့စ် အများအပြားထက် အင်တာဖေ့စ်တစ်ခုတည်းမှတစ်ဆင့် ဖိုင်းဝေါလ်အားလုံးကို ထိန်းချုပ်နိုင်စေပြီး၊ အမှားများ ဖြစ်ပေါ်နိုင်ချေကို လျှော့ချပေးသည်။
